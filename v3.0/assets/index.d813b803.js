const y=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const n of f.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function i(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerpolicy&&(f.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?f.credentials="include":o.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(o){if(o.ep)return;o.ep=!0;const f=i(o);fetch(o.href,f)}};y();function p(r){return Object.prototype.toString.call(r)==="[object Array]"}function x(r){if(!p(r))return!1;if(r.length===0)return!0;if(!p(r[0]))return!1;const t=r.length,i=r[0].length;for(let l=1;l<t;l++){const o=r[l];if(!p(o)||o.length!==i)return!1}return!0}function d(r){let t=[];for(const i of r)t.push(Array.from(i));return t}function h(){this.step_array=[],this.x=void 0,this.xCNT=void 0}h.prototype.add=function(r){if(!x(r))throw r+" is not a matrix";this.step_array.push(d(r))};h.prototype.finish=function(r){if(!p(r))throw r+" is not an array";this.x=r};h.prototype.toString=function(){const r=this.step_array.length;let t=`steps:
`;for(let i=0;i<r;i++){const l=this.step_array[i];t+=i+`: [
`;for(const o of l)t+="	["+o.join(", ")+`]
`;t+=`]
`}switch(t+="result: ",this.xCNT){case 0:t+="0 solution";break;case 1:t+="["+this.x.join(", ")+"]";break;case 1/0:t+="infinity solutions";break;default:t+="not calculated yet"}return t};function g(r){let t=d(r);if(!x(t))throw t+" is not a matrix";let i=t.length;const l=t[0].length-1,o=new h;for(let n=0;n<i;n++){const u=t[n];if(u.slice(0,-1).filter(c=>c!==0).length===0){if(u[l]!==0)return o.xCNT=0,o;t.splice(n,1),n--,i--;continue}if(n===i-1)break;for(let c=n+1;c<i;c++){const e=t[c][n]/t[n][n];for(let s=0;s<l+1;s++)t[c][s]-=e*t[n][s]}o.add(t)}if(i===l)o.xCNT=1;else return i>l?o.xCNT=0:o.xCNT=1/0,o;let f=new Array(l);for(let n=l-1;n>=0;n--){if(f[n]=t[n][l]/t[n][n],t[n][n]=1,t[n][l]=f[n],n>0)for(let u=0;u<n;u++)t[u][l]-=f[n]*t[u][n],t[u][n]=0;o.add(t)}return o.finish(f),o}function m(r){let t=d(r);if(!x(t))throw t+" is not a matrix";const i=t[0].length-1,l=new h,o=g(r);if(o.xCNT!==1)return l.xCNT=o.xCNT,l;let f=[],n=[],u=new Array(i),c=new Array(i);for(let e=0;e<i;e++){f.push([]),n.push([]);for(let s=0;s<i;s++)e===s?f[e].push(1):f[e].push(0),n[e].push(0)}for(let e=0;e<i;e++){for(let s=e;s<i;s++){n[e][s]=t[e][s];for(let a=0;a<=e-1;a++)n[e][s]-=f[e][a]*n[a][s]}for(let s=e+1;s<i;s++){f[s][e]=t[s][e];for(let a=0;a<=e-1;a++)f[s][e]-=f[s][a]*n[a][e];f[s][e]/=n[e][e]}}for(let e=0;e<i;e++){u[e]=t[e][i];for(let s=0;s<=e-1;s++)u[e]-=f[e][s]*u[s]}t=d(n);for(let e=0;e<i;e++)t[e].push(u[e]);l.add(t);for(let e=i-1;e>=0;e--){if(c[e]=t[e][i]/t[e][e],t[e][e]=1,t[e][i]=c[e],e>0)for(let s=0;s<e;s++)t[s][i]-=c[e]*t[s][e],t[s][e]=0;l.add(t)}return l.xCNT=1,l.x=c,l}const N={data(){return{selectedIndex:0,algoArray:[{name:"\u9AD8\u65AF\u6D88\u5143\u6CD5",func:g},{name:"Doolittle\u5206\u89E3\u6CD5",func:m}],inputMatrix:[[0,0,0],[0,0,0]],result:null}},methods:{addRow(){const r=this.inputMatrix[0].length;this.inputMatrix.push(new Array(r).fill(0))},removeRow(){this.inputMatrix.length>1&&this.inputMatrix.pop()},addCol(){const r=this.inputMatrix.length;for(let t=0;t<r;t++)this.inputMatrix[t].splice(-1,0,0)},removeCol(){const r=this.inputMatrix.length;if(this.inputMatrix[0].length!==2)for(let i=0;i<r;i++)this.inputMatrix[i].splice(-2,1)},calculate(){const r=this.algoArray[this.selectedIndex].func;console.log(r),this.result=r(this.inputMatrix),console.log(this.result)}}};Vue.createApp(N).mount("#app");
